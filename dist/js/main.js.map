{"version":3,"sources":["main.js"],"names":["Main","evt","responseInfo","detail","console","log","mapCenter","center","preventDefault","query","target","querySelector","value","searchInfo","latitude","lat","longitude","lng","searchEvent","CustomEvent","document","dispatchEvent","giphyEvent","results","articleContainer","createElement","setAttribute","classResults","appendChild","i","length","business","name","photo","image_url","price","rating","transactionType","transactions","id","businessItemEl","nameEl","textContent","location","display_address","locationEl","category","categories","categoryEl","map","cat","title","join","priceEL","ratingEl","transactionEL","markerInfo","coordinates","windowContent","innerHTML","businessId","newGifImage","src","images","fixed_height","url","classList","add","gifContainerParagraph","reviews","setUpListener","getMapCenter","form","addEventListener","handleSearch","handleMapCenterResponse","handleResults","handleGifResults","handleYelpReviewResults"],"mappings":"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","sourcesContent":["// console.log(` \n// Change this message, and make sure it changes in the browser \n// to verify that you're working in the right files.`)\n\nclass Main{\n    constructor () {\n        \n        this.setUpListener()\n        // this.getMapCenter()\n        \n    }\n    getMapCenter(){\n        const getMapCenter = new CustomEvent('get-map-center')\n        document.dispatchEvent(getMapCenter)\n    }\n    setUpListener(){\n        const form = document.querySelector('form[name=\"place_search\"]')\n        form.addEventListener('submit', this.handleSearch)\n        \n\n        document.addEventListener('get-map-center-response', this.handleMapCenterResponse)\n        document.addEventListener('map-ready', this.getMapCenter)\n        document.addEventListener('business-search-results', this.handleResults)\n        document.addEventListener('giphy-results', this.handleGifResults)\n\n        document.addEventListener('yelp-review', this.handleYelpReviewResults)\n\n    }\n\n    handleMapCenterResponse = (evt) =>{\n        const responseInfo = evt.detail\n        console.log(evt)\n        this.mapCenter = responseInfo.center\n    }\n\n    handleSearch = (evt) => {\n        evt.preventDefault()\n        console.log(evt.detail)\n        const query = evt.target.querySelector('input[name=\"place\"]').value\n        console.log('query', query, this.mapCenter)\n\n        const searchInfo = { \n            query: query, \n            latitude: this.mapCenter.lat(),\n            longitude: this.mapCenter.lng(),\n        }\n        const searchEvent = new CustomEvent('business-search', { detail: searchInfo })\n        document.dispatchEvent(searchEvent)\n\n        const giphyEvent = new CustomEvent('giphy-search', { detail: query })\n        document.dispatchEvent(giphyEvent)\n\n    }\n\n    handleResults = (evt) => {\n       const results = evt.detail.results\n       console.log(results)\n       //parent container\n\n       const articleContainer = document.createElement('div');\n       articleContainer.setAttribute('class', 'business-Container');\n       const classResults = document.querySelector('.classResults')\n       classResults.appendChild( articleContainer);\n\n       //loop for businesses\n      \n       for (let i = 0; i < results.length; i++ ){\n\n\n           const business = results[i]\n           const name = business.name\n           const photo = business.image_url\n           const price = business.price\n           const rating = business.rating\n           const transactionType = business.transactions\n           const id = business.id\n\n\n        \n\n        //    //fire request \n        //    // get- reviews look at line 43/44 fire custome event \n        //    // new listener and handle \n\n        \n\n            \n          \n           \n\n        //    // Business Item\n           const businessItemEl = document.createElement('div');\n           businessItemEl.setAttribute('class', 'business-item');\n           \n\n        //    //Name\n           const nameEl = document.createElement('h2');\n           businessItemEl.appendChild(nameEl);\n           nameEl.textContent = name;\n\n           //location \n           const location = business.location.display_address\n           const locationEl =document.createElement('h3');\n           businessItemEl.appendChild(locationEl);\n           locationEl.textContent = location;\n\n           //image \n        //    const photoEl = document.createElement('img');\n        //    businessItemEl.appendChild(photoEl);\n        //    photoEl.setAttribute('src', photo);\n\n           //categories\n           const category = business.categories\n           const categoryEl = document.createElement('h4');\n           businessItemEl.appendChild(categoryEl);\n           categoryEl.textContent = category.map((cat) => cat.title).join('\\n');\n           businessItemEl.appendChild(categoryEl);\n\n           //price\n           const priceEL = document.createElement('p');\n           priceEL.setAttribute('class', 'dollar-sign-price');\n           businessItemEl.appendChild(priceEL);\n           priceEL.textContent = price;\n\n           //rating\n           const ratingEl = document.createElement('p');\n           ratingEl.setAttribute('class', 'rating');\n           businessItemEl.appendChild(ratingEl);\n           ratingEl.textContent = rating + '😉';\n\n           //transaction\n           const transactionEL = document.createElement('p');\n           transactionEL.setAttribute('class', 'transaction_type');\n           businessItemEl.appendChild(transactionEL);\n           transactionEL.textContent = transactionType;\n\n        \n\n           const markerInfo = { \n            lat: business.coordinates.latitude,\n            lng: business.coordinates.longitude,\n            title: business.name,\n            windowContent: businessItemEl.innerHTML,\n            businessId: id\n            // windowContent: `<h2>${business.name}</h2><h2>${business.image_url}</h2>`\n            }\n\n            const searchEvent = new CustomEvent('add-marker', { detail: markerInfo })\n            document.dispatchEvent(searchEvent)\n\n\n\n            //Giphy\n\n           \n                       \n\n       }\n    }\n       handleGifResults = (evt) =>{\n            const results = evt.detail\n\n              for (let i=0; i < 3; i++){\n                    // console.log('loop', i)\n\n                let newGifImage = document.createElement('img')\n                newGifImage.src= results[i].images.fixed_height.url\n                \n                newGifImage.classList.add('gif')\n                let gifContainerParagraph = document.querySelector('p.gifs-go-here')\n                gifContainerParagraph.appendChild(newGifImage) \n                  \n              }\n       }\n\n       handleYelpReviewResults = (evt) =>{\n           const reviews = evt.detail\n           console.log('got reviews', reviews)\n\n\n           //dom manipluation \n\n\n       }\n       \n}\n\n\n\n\n\nnew Main()"],"file":"main.js"}