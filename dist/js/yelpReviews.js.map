{"version":3,"sources":["yelpReviews.js"],"names":["YelpApi","evt","preventDefault","console","log","detail","searchInfo","term","query","data","_ep","latitude","longitude","headers","Authorization","API_KEY","axios","get","API_BASE_URL","params","then","processResults","results","businesses","resultsData","resultsEvent","CustomEvent","document","dispatchEvent","businessId","processReviews","reviews","reviewsData","reviewEvent","setUpListener","addEventListener","handleSearch","handleReviews"],"mappings":"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","sourcesContent":["class YelpApi{\n\n    API_KEY = 'Tow02LN0q2c-t3X-Sq8qlJOMtFc7-tmsGglB_PJ927cw4FMErKxZI8EJN5FaAFuZGL5_6USYexsippLsH5f8NOurISqUA02NvVF_zWYeoocmtlhSUZsqy8d4esl9YHYx'\n    API_BASE_URL = 'https://circuslabs.net/proxies/yelp-fusion-proxy/'\n\n    constructor(){\n        console.log('yelp is ready')\n        this.setUpListener()\n    }\n\n    setUpListener(){\n        // const form = document.querySelector('form[name=\"business_search\"]')\n        // form.addEventListener('submit', this.handleSearch)\n\n        document.addEventListener('business-search', this.handleSearch)\n        document.addEventListener('review-search', this.handleReviews)\n\n    }\n\n    handleSearch = (evt) => {\n        evt.preventDefault()\n        console.log('searching....', evt.detail)\n\n        const searchInfo = evt.detail\n\n\n\n        const term = searchInfo.query\n       \n       \n        \n        const data ={\n            _ep: '/businesses/search',\n            term: term,\n            latitude: searchInfo.latitude,\n            longitude: searchInfo.longitude,\n           \n            \n\n        }\n        const headers = {\n            Authorization: `Bearer ${this.API_KEY}`\n        }\n\n        axios.get(this.API_BASE_URL, { params: data, headers: headers }).then(this.processResults)\n    }\n\n    processResults = (data) => {\n        console.log(data)\n        const results = data.data.businesses\n        console.log('we got data!', results)\n\n        const resultsData = {results: results }\n        const resultsEvent = new CustomEvent('business-search-results', { detail: resultsData })\n\n        document.dispatchEvent(resultsEvent)\n\n        // //parent container\n\n        // const articleContainer = document.createElement('div');\n        // articleContainer.setAttribute('class', 'business-Container');\n        // const classResults = document.querySelector('.classResults')\n        // classResults.appendChild( articleContainer);\n\n        // //loop for businesses\n       \n        // for (let i = 0; i < results.length; i++ ){\n\n\n        //     const business = results[i]\n        //     const name = business.name\n        //     const photo = business.image_url\n        //     const price = business.price\n        //     const rating = business.rating\n        //     const transactionType = business.transactions\n            \n\n        //     // Business Item\n        //     const businessItemEl = document.createElement('div');\n        //     businessItemEl.setAttribute('class', 'business-item');\n        //     articleContainer.appendChild(businessItemEl);\n\n        //     //Name\n        //     const nameEl = document.createElement('h2');\n        //     businessItemEl.appendChild(nameEl);\n        //     nameEl.textContent = name;\n\n        //     //location \n        //     const location = business.location.display_address\n        //     const locationEl =document.createElement('h3');\n        //     businessItemEl.appendChild(locationEl);\n        //     locationEl.textContent = location;\n\n        //     //image \n        //     const photoEl = document.createElement('img');\n        //     businessItemEl.appendChild(photoEl);\n        //     photoEl.setAttribute('src', photo);\n\n        //     //categories\n        //     const category = business.categories\n        //     const categoryEl = document.createElement('h4');\n        //     businessItemEl.appendChild(categoryEl);\n        //     categoryEl.textContent = category.map((cat) => cat.title).join('\\n');\n        //     businessItemEl.appendChild(categoryEl);\n\n        //     //price\n        //     const priceEL = document.createElement('p');\n        //     priceEL.setAttribute('class', 'dollar-sign-price');\n        //     businessItemEl.appendChild(priceEL);\n        //     priceEL.textContent = price;\n\n        //     //rating\n        //     const ratingEl = document.createElement('p');\n        //     ratingEl.setAttribute('class', 'rating');\n        //     businessItemEl.appendChild(ratingEl);\n        //     ratingEl.textContent = rating + 'ðŸ˜‰';\n\n        //     //transaction\n        //     const transactionEL = document.createElement('p');\n        //     transactionEL.setAttribute('class', 'transaction_type');\n        //     businessItemEl.appendChild(transactionEL);\n        //     transactionEL.textContent = transactionType;\n\n        // }\n    }\n    handleReviews = (evt) => {\n        evt.preventDefault()\n        \n\n        const businessId = evt.detail\n\n        console.log('searching....', businessId)\n\n        const data ={\n            _ep: `/businesses/${businessId}/reviews`,\n           \n        }\n        const headers = {\n            Authorization: `Bearer ${this.API_KEY}`\n        }\n\n        axios.get(this.API_BASE_URL, { params: data, headers: headers }).then(this.processReviews)\n    }\n\n    processReviews = (data) =>{\n        // Reviews\n        const reviews = data.data.reviews\n        console.log('we got reviews', reviews)\n\n        const reviewsData = {results: reviews }\n        const reviewEvent = new CustomEvent('yelp-review', { detail: reviewsData })\n        document.dispatchEvent(reviewEvent)\n\n\n    }\n\n    \n} \n\nnew YelpApi ()"],"file":"yelpReviews.js"}